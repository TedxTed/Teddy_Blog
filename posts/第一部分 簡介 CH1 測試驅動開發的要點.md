# 第一部分 簡介 CH1 測試驅動開發的要點
###### tags: `測試驅動的面向對象軟件開發`
> 人必須做中學;因為即使你認為你知道,你也不能肯定,除非你去嘗試

## 1.1 軟件開發是一個學習過程
- 開發者通常並不完全理解他所使用的技術
- 系統包含許多重要的組件，他變得極為複雜，沒有一個人可以了解所有的可能性
## 1.2 反饋是基本工具
- 利用經驗反饋來學習該系統及其使用方式->學習的東西在應用到系統->不段循環
- 每個循環新增新特徵，並得到已完成工作的數量和質量的反饋
- 部署非常關鍵，團隊成員都有機會檢查他們的假定是否符合實際
- 沒有部署，反饋就是不完整的
- 反饋循環像是：結對編程，單元測試，驗收測試，每日會議，迭代，發布....
## 1.3 支持變化的實踐
- 第一：需要經常測試已捕捉回歸錯誤，這樣就能在添加新特徵的同時不會破壞已有的特徵，頻繁地進行人工測試是不現實的
- 第二：需要盡可能地保持代碼簡單，這樣代碼就容易理解和修改
- TDD把測試變成一種設計活動，我們使用測試來澄清思路，說明我們希望代碼做什麼
## 1.4 測試驅動開發簡介
- TDD的核心循環：
    - 寫一個測試;寫一些代碼讓測試通過;重構代碼,使測試特徵的實現盡可能簡單
- 好處
    - 澄清下一部分工作的驗收條件
    - 鼓勵我們寫出鬆耦合的組件->容易分開測試
    - 為代碼功能添加一段可執行的描述
    - 我們還很清楚的狀況檢測到錯誤
    - 讓我們知道何時已經做得夠好
## 1.5 大局
- 我們怎樣知道從哪裡開始寫測試？更重要的是，我們怎樣知道何時停止寫代碼？金規告訴我們：寫一個會失敗的測試
- 當實現一項特徵時，我們從編寫一個驗收測試開始，這個測試執行我們想創建的功能，當一個驗收測試運行失敗時，證明系統還沒有實現這一項特徵，當他通過時，工作就完成了
- 在開發功能時我們利用他的驗收測試來指導工作
![](https://i.imgur.com/sc8hOlt.png)

## 1.6 用戶場景測試
- 驗收測試就應該模擬用戶使用場景，用戶場景測試只從外部與系統交互
- 系統的整體行為包括他與外部環境的交互，這通常是風險最大，最難，忽略他要承擔風險
## 1.7 測試的級別
- 級別
    - 驗收測試：整個系統能工作嗎, 別名：功能測試,客戶測試,系統測試,...etc
        - 利用驗收測試來確保在持續開發過程中沒有破壞已有的特徵
        - 盡可能反映用戶場景
    - 集成測試：代碼能與那些我們無法修改的代碼一起工作嗎
        - 他可能是一個公用的框架
        - 來自組織機構其他團隊的庫
        - 大多數專也的開發中，五們仍需要集成測試來幫助書裡外部包的配至問題
    - 單元測試：對象是否做了正確的事，與他們打交道容易嗎
- 
## 1.8 外部品質與內部品質
- 外部品質： 系統滿足客戶和用戶的需求程度（系統是否能工作，可靠性好，可用性高，響應速度快）
    - 執行用戶場景測試能夠反應系統外部品質
    - 無法告訴代碼寫的怎麼樣
- 內部品質： 讓你能夠應對不段發生的，未預期的變化，這種變化是軟體工作要面對的現實，保持內部品質的目的，是讓我們在修改系統行為時能夠能夠確保安全並且可預測，可以減少大量返工的風險
    - 編寫單元測試證明顯示許多關於代碼品質的訊息
    - 執行這些測試可以知道有沒有破壞任何類
    - 全面單元測試可以幫助我們改進內部品質
        - 針對一個對象的單元測試需要創立這個對象，提供他依賴關係並與他交互，檢查他的行為是否符合預期
        - 一個類想要容易測試，必須有明確的依賴關係，可以很容易替換，也必須有清晰的職責，容易條用並驗證
        - 意味者代碼必須是，高內聚，低耦合->設計良好的